(this["webpackJsonphsl-liitynta"]=this["webpackJsonphsl-liitynta"]||[]).push([[0],{103:function(n,e,t){"use strict";t.r(e);var i,r,c,o,a,s=t(0),l=t.n(s),u=t(23),d=t.n(u),j=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,113)).then((function(e){var t=e.getCLS,i=e.getFID,r=e.getFCP,c=e.getLCP,o=e.getTTFB;t(n),i(n),r(n),c(n),o(n)}))},b=t(2),h=t(5),p=t(15),f=t(66),O=t.n(f),x=t(21),g=t(4),m=t(7),v=t(3),y=t(17),k=t.n(y),S=t(32),E=t(19),T=t.n(E),A=v.a.div(i||(i=Object(b.a)(["\n    display: inline-block;\n    position: absolute;\n    left: -10px;\n    top: 3px;\n    width: ","px;\n    height: ","px;\n    border-top: 1px solid ",";\n    border-right: 1px solid",";\n    transform:rotate(-135deg);\n    transition: all 0.2s ease-in;\n"])),(function(n){return n.theme.spacing.medium}),(function(n){return n.theme.spacing.medium}),(function(n){return n.color}),(function(n){return n.color})),I=t(1),w=v.a.div(r||(r=Object(b.a)(["\n    background-color: ",";\n    border: 1px solid ",";\n    border-radius: 4px;\n    box-shadow: 0px 8px 13px -3px rgba(0,0,0,0.20);\n"])),(function(n){return n.theme.color.white}),(function(n){return n.theme.color.border})),C=v.a.div(c||(c=Object(b.a)(["\n    border-bottom: 1px solid ",";\n    padding: ","px;\n"])),(function(n){return n.theme.color.border}),(function(n){return n.theme.spacing.medium})),D=v.a.div(o||(o=Object(b.a)(["\n    padding: ","px;\n"])),(function(n){return n.theme.spacing.medium}));function F(n){var e=n.children,t=n.title;return Object(I.jsxs)(w,{children:[Object(I.jsx)(C,{children:Object(I.jsx)("h3",{children:t})}),Object(I.jsx)(D,{children:e})]})}var H,L=v.a.header(a||(a=Object(b.a)(["\n    padding: ","px;\n    background-color: ",";\n    color: ",";\n    display: flex;\n    align-items: center;\n"])),(function(n){return n.theme.spacing.large}),(function(n){return n.theme.color.primary}),(function(n){return n.theme.color.white}));function N(n){var e=n.children;return Object(I.jsx)(L,{children:e})}var _,R,U=Object(v.a)(x.b)(H||(H=Object(b.a)(["\n    color: ",';\n    text-decoration: none;\n    position: relative;\n    &:after {    \n        background: none repeat scroll 0 0 transparent;\n        bottom: -5px;\n        content: "";\n        display: block;\n        height: 2px;\n        left: 50%;\n        position: absolute;\n        background: ',";\n        transition: width 0.3s ease 0s, left 0.3s ease 0s;\n        width: 0;\n        }\n\n    &:hover {\n        &:after { \n        width: 100%; \n        left: 0; \n        }\n        & > * {\n            transform: rotate(-135deg) translate(2px, -2px)\n        }\n    }\n"])),(function(n){return n.color}),(function(n){return n.color})),M=v.a.h2(_||(_=Object(b.a)(["\n  margin: 0 auto;\n"]))),Y=v.a.div(R||(R=Object(b.a)(["\n  width: 90%;\n  margin: 1rem auto;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: ","px;\n"])),(function(n){return n.theme.spacing.large}));function z(){var n=Object(s.useState)(),e=Object(m.a)(n,2),t=e[0],i=e[1],r=Object(g.f)().id;Object(s.useEffect)((function(){k.a.get("https://p.hsl.fi/api/v1/facilities/".concat(r,".json")).then((function(n){i(n.data)})).catch((function(n){console.log(n)})).then((function(){}))}),[]);var c=Object(h.h)();return Object(I.jsxs)("div",{children:[Object(I.jsxs)(N,{children:[Object(I.jsxs)(U,{color:c.color.white,to:"/",children:[Object(I.jsx)(A,{color:c.color.white}),"Takaisin"]}),Object(I.jsx)(M,{children:t?t.name.fi:Object(I.jsx)(T.a,{})})]}),Object(I.jsxs)(Y,{children:[Object(I.jsx)(F,{title:"Aukioloajat",children:t?Object(I.jsxs)(I.Fragment,{children:[t.openingHours.byDayType.BUSINESS_DAY&&Object(I.jsxs)("p",{children:[Object(I.jsx)("strong",{children:"Arkip\xe4iv\xe4t:"})," ",t.openingHours.byDayType.BUSINESS_DAY.from," - ",t.openingHours.byDayType.BUSINESS_DAY.until]}),t.openingHours.byDayType.SATURDAY&&Object(I.jsxs)("p",{children:[Object(I.jsx)("strong",{children:"Lauantai:"})," ",t.openingHours.byDayType.SATURDAY.from," - ",t.openingHours.byDayType.SATURDAY.until]}),t.openingHours.byDayType.SUNDAY&&Object(I.jsxs)("p",{children:[Object(I.jsx)("strong",{children:"Sunnuntai:"})," ",t.openingHours.byDayType.SUNDAY.from," - ",t.openingHours.byDayType.SUNDAY.until]})]}):Object(I.jsx)(T.a,{})}),0!==(null===t||void 0===t?void 0:t.services.length)&&Object(I.jsx)(I.Fragment,{children:t?Object(I.jsx)(F,{title:"Palvelut",children:Object(I.jsx)("ul",{children:t.services.map((function(n){return Object(I.jsx)("li",{children:Object(I.jsx)(S.b,{text:n})},n)}))})}):Object(I.jsx)(T.a,{})}),"CUSTOM"===(null===t||void 0===t?void 0:t.pricingMethod)&&Object(I.jsxs)(F,{title:"Pys\xe4k\xf6intihinnasto",children:[t.pricing.map((function(n){return Object(I.jsxs)("p",{children:[" ",Object(I.jsx)(S.b,{text:n.capacityType}),": ",n.price.fi]},n.capacityType)})),Object(I.jsx)("p",{children:Object(I.jsx)("strong",{children:" Maksutavat: "})}),Object(I.jsx)("ul",{children:t.paymentInfo.paymentMethods.map((function(n){return Object(I.jsx)("li",{children:Object(I.jsx)(S.b,{text:n})},n)}))})]})]})]})}var B=t(33),P=t.n(B),G=t(39),K=t(40),J=t(6),V=t(109),W=t(112),q=t(110),Q=t(111),X=t(11),Z=t(31);var $=Object(Z.a)("div",{target:"emb2msa2"})({name:"bjn8wh",styles:"position:relative"}),nn=Object(Z.a)("input",{target:"emb2msa1"})({name:"109bpo7",styles:"border:0;clip:rect(0 0 0 0);clippath:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px"}),en=Object(Z.a)("div",{target:"emb2msa0"})("display:flex;cursor:pointer;align-items:center;justify-content:center;width:40px;height:40px;background-color:",(function(n){return n.checked?n.theme.color.primary:n.theme.color.white}),";border-radius:50%;border:2px solid ",(function(n){return n.theme.color.primary}),";transition:all 150ms;color:",(function(n){return n.checked?n.theme.color.white:n.theme.color.primary}),";font-size:0.8rem;text-align:center;");function tn(n){var e=n.checked,t=n.children,i=Object(X.a)(n,["checked","children"]);return Object(I.jsxs)($,{children:[Object(I.jsx)(nn,Object(J.a)({type:"checkbox",defaultChecked:e},i)),Object(I.jsx)(en,{checked:e,children:t})]})}var rn,cn,on,an,sn,ln=t(107),un=t(108),dn=t(8),jn=t.n(dn),bn=t(51),hn=t.n(bn),pn=t(105),fn=t(106),On=v.a.div(rn||(rn=Object(b.a)(["\n  position: relative;\n  \n  border-radius: 50% 50% 50% 0;\n  border: 4px solid ",";\n  width: 20px;\n  height: 20px;\n  transform: rotate(-45deg);\n  background-color: white;\n\n  &::after {\n    position: absolute;\n  content: '';\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  top: 50%;\n  left: 50%;\n  margin-left: -5px;\n  margin-top: -5px;\n  background-color: ",";\n  }\n"])),(function(n){return n.color}),(function(n){return n.color}));function xn(n){var e=n.marker,t=n.details,i=Object(h.h)(),r=Object(s.useState)([]),c=Object(m.a)(r,2),o=c[0],a=c[1],l=Object(s.useState)(),u=Object(m.a)(l,2),d=u[0],j=u[1];var b=jn.a.divIcon({className:"custom-icon",html:hn.a.renderToString(Object(I.jsx)(On,{color:i.color.primary}))}),p=jn.a.divIcon({className:"custom-icon",html:hn.a.renderToString(Object(I.jsx)(On,{color:i.color.grey}))}),f=d;return Object(I.jsx)(ln.a,{position:[e.location.bbox[1],e.location.bbox[0]],icon:t&&t.openingHours.openNow?b:p,eventHandlers:{click:function(){var n;a([]),n=e.id,k.a.get("https://p.hsl.fi/api/v1/facilities/".concat(n,"/utilization.json")).then((function(n){a(n.data)})).catch((function(n){console.log(n)})).then((function(){})),j(void 0),t&&function(n){Object(pn.a)(new Date)?j(n.SATURDAY):Object(fn.a)(new Date)&&j(n.SUNDAY),j(n.BUSINESS_DAY)}(t.openingHours.byDayType)}},children:Object(I.jsxs)(un.a,{closeOnClick:!1,children:[Object(I.jsx)("h4",{children:e.name.fi}),f&&Object(I.jsxs)("span",{children:["Avoinna t\xe4n\xe4\xe4n: ",null===f||void 0===f?void 0:f.from," - ",null===f||void 0===f?void 0:f.until]}),Object(I.jsx)("br",{}),"Paikkoja yhteens\xe4: ",null===t||void 0===t?void 0:t.builtCapacity.CAR,0!==o.length&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("br",{}),Object(I.jsxs)("span",{children:["Paikkoja vapaana: ",o[0].spacesAvailable]})," "]}),Object(I.jsx)("p",{children:Object(I.jsx)(x.b,{to:"/asema/".concat(e.id),children:"Katso lis\xe4tiedot"})})]})})}var gn=v.a.div(cn||(cn=Object(b.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n"]))),mn=Object(v.a)(V.a)(on||(on=Object(b.a)(["\n    width: 100%;\n    height: 100%;\n    .leaflet-div-icon {\n        background-color: transparent;\n        background: transparent;\n        border: 0;\n    }\n\n"]))),vn=v.a.div(an||(an=Object(b.a)(["\n  display: block;\n  position: absolute;\n  top: 0;\n  right: 0;\n  background-color: rgba(255,255,255,0.7);\n  padding: ","px;\n  z-index: 999;\n"])),(function(n){return n.theme.spacing.large})),yn=v.a.div(sn||(sn=Object(b.a)(["\n  display:flex;\n  width: 100%;\n  flex-direction: column;\n  align-items: center;\n\n  & > * {\n    margin-top: ","px;\n  }\n"])),(function(n){return n.theme.spacing.medium}));function kn(n){var e=n.markers,t=Object(s.useState)(null),i=Object(m.a)(t,2),r=i[0],c=i[1],o=Object(s.useRef)(!0),a=Object(s.useState)({"12H":!1,247:!1,CUSTOM:!1}),l=Object(m.a)(a,2),u=l[0],d=l[1],j=Object(s.useState)(!1),b=Object(m.a)(j,2),h=b[0],p=b[1],f=Object(s.useState)([]),O=Object(m.a)(f,2),x=O[0],g=O[1],v=Object(s.useState)(e),y=Object(m.a)(v,2),S=y[0],E=y[1],A=function(n){!function(n){var e=Object.keys(n).filter((function(e){return n[e]}));g(e),d(n)}(Object(J.a)(Object(J.a)({},u),{},Object(K.a)({},n.target.name,!u[n.target.name])))},w=Object(s.useCallback)((function(){if(0===x.length&&!h)return e;if(h){var n=null===r||void 0===r?void 0:r.filter((function(n){return n.openingHours.openNow})).map((function(n){return n.id}));return 0!==x.length?e.filter((function(e){return null===n||void 0===n?void 0:n.some((function(n){return e.id===n}))})).filter((function(n){return x.some((function(e){return n.pricingMethod.includes(e)}))})):e.filter((function(e){return null===n||void 0===n?void 0:n.some((function(n){return e.id===n}))}))}return e.filter((function(n){return x.some((function(e){return n.pricingMethod.includes(e)}))}))}),[x,r,h]);Object(s.useEffect)((function(){var n=e.map((function(n){return k.a.get("https://p.hsl.fi/api/v1/facilities/".concat(n.id,".json")).then((function(n){return n.data}))}));n&&Promise.all(n).then((function(n){if(!o.current)return null;c(n)}))}),[]),Object(s.useEffect)((function(){return function(){o.current=!1}}),[]),Object(s.useEffect)((function(){var n=w();E(n)}),[x,h]);return Object(I.jsxs)(gn,{children:[Object(I.jsxs)(vn,{children:[Object(I.jsx)("h3",{children:"Maksuton:"}),Object(I.jsxs)(yn,{children:[Object(I.jsx)("label",{children:Object(I.jsx)(tn,{name:"12H",checked:u["12H"],onChange:A,children:"12h"})}),Object(I.jsx)("label",{children:Object(I.jsx)(tn,{name:"247",checked:u[247],onChange:A,children:"24h"})})]}),Object(I.jsx)(yn,{children:r?Object(I.jsx)("label",{children:Object(I.jsx)(tn,{name:"open",checked:h,onChange:function(){p(!h)},children:Object(I.jsx)("span",{children:"Auki nyt"})})}):Object(I.jsx)(T.a,{circle:!0,width:40,height:40})})]}),Object(I.jsxs)(mn,{center:[60.402778,25.029167],zoom:11,children:[Object(I.jsx)(W.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(I.jsx)(q.a,{pathOptions:{color:"purple"},children:S&&S.map((function(n){var e=null===r||void 0===r?void 0:r.find((function(e){return e.id===n.id}));return Object(I.jsxs)("div",{children:[Object(I.jsx)(xn,{details:e,marker:n}),Object(I.jsx)(Q.a,{bounds:[[n.location.bbox[1],n.location.bbox[0]],[n.location.bbox[3],n.location.bbox[2]]]},n.id)]},n.id)}))})]})]})}var Sn=t(29);function En(n){return{success:!0,value:n}}function Tn(n){return{success:!1,error:n}}function An(){return In.apply(this,arguments)}function In(){return(In=Object(G.a)(P.a.mark((function n(){var e;return P.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,k.a.get("https://p.hsl.fi/api/v1/facilities.json");case 3:return e=n.sent,n.abrupt("return",En(e.data));case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",Tn(n.t0));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))).apply(this,arguments)}var wn=t(18),Cn=t(42),Dn={facilities:[],isLoading:!0,isError:!1};var Fn,Hn=Object(wn.combineReducers)({facilities:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_FACILITIES":return Object(Cn.a)(n,(function(n){n.isLoading=!0}));case"FETCH_FACILITIES_SUCCESS":return Object(Cn.a)(n,(function(n){n.facilities=e.payload.response.results,n.isLoading=!1,n.isError=!1}));case"FETCH_FACILITIES_FAILURE":return Object(Cn.a)(n,(function(n){n.isLoading=!1,n.isError=!0}));default:return n}}}),Ln=Sn.c,Nn=v.a.div(Fn||(Fn=Object(b.a)(["\n  width: 100%;\n  height: 90vh;\n"])));function _n(){var n=Object(Sn.b)(),e=Ln((function(n){return n.facilities})),t=e.facilities,i=e.isLoading,r=e.isError;return Object(s.useEffect)((function(){function e(){return(e=Object(G.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"FETCH_FACILITIES"}),e.next=3,An();case 3:(t=e.sent).success?n({type:"FETCH_FACILITIES_SUCCESS",payload:{response:t.value}}):n({type:"FETCH_FACILITIES_FAILURE"});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}0===t.length&&function(){e.apply(this,arguments)}()}),[n]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(N,{children:Object(I.jsx)("h2",{children:"Liitynt\xe4pys\xe4k\xf6intiparkkipaikat"})}),i&&Object(I.jsx)(T.a,{width:"100%",height:700}),r&&"Jotain meni vikaan",!i&&!r&&Object(I.jsx)(Nn,{children:Object(I.jsx)(kn,{markers:t})})]})}function Rn(){return Object(I.jsx)(x.a,{children:Object(I.jsxs)(g.c,{children:[Object(I.jsx)(g.a,{path:"/asema/:id",children:Object(I.jsx)(z,{})}),Object(I.jsx)(g.a,{path:"/",children:Object(I.jsx)(_n,{})})]})})}var Un,Mn={color:{primary:"#1b8185",grey:"#9e9e9e",white:"#ffffff",border:"#d4d4d4"},spacing:{small:4,medium:8,large:16}};function Yn(){return Object(I.jsxs)(h.d,{theme:Mn,children:[Object(I.jsx)(p.Global,{styles:Object(p.css)(Un||(Un=Object(b.a)(["\n         ","\n\n        body {\n          font-family: 'Nunito', sans-serif;\n          font-size: 16px;\n          h1,h2,h3, h4 {  \n            font-family: 'Raleway', sans-serif;\n            margin-bottom: 0.3rem;\n          }\n          h1 {\n            font-size: 2rem;\n          }\n          h2 {\n            font-size: 1.6rem;\n          }\n          h3 {\n            font-size: 1.4rem;\n          }\n          h4 {\n            font-size: 1.2rem;\n          }\n          strong {\n            font-weight: 700;\n          }\n          li {\n            list-style: circle;\n            margin-left: 16px;\n          }\n          p {\n            font-family: 'Nunito', sans-serif;\n            margin-bottom: 4px;\n          }\n        }\n      "])),O.a)}),Object(I.jsx)(Rn,{})]})}var zn=t(68),Bn=Object(wn.createStore)(Hn,Object(zn.composeWithDevTools)(Object(wn.applyMiddleware)()));d.a.render(Object(I.jsx)(l.a.Fragment,{children:Object(I.jsx)(Sn.a,{store:Bn,children:Object(I.jsx)(S.a,{language:"fi",translation:{COINS:{fi:"K\xe4teinen"},NOTES:{fi:"Seteli"},DEBITCARD:{fi:"Maksukortti"},OTHER:{fi:"Muu"},CAR:{fi:"Auto"},DISABLED:{fi:"Inva"},ELECTRIC_CAR:{fi:"S\xe4hk\xf6auto"},LIGHTING:{fi:"Valaistus"},COVERED:{fi:"Katettu"},SURVEILLANCE_CAMERAS:{fi:"Kameravalvonta"},PAYMENT_AT_GATE:{fi:"Maksu portille"},ENGINE_IGNITION_AID:{fi:"K\xe4ynnistysapu"},BICYCLE_FRAME_LOCK:{fi:"Polkupy\xf6r\xe4n runkolukkoteline"}},children:Object(I.jsx)(Yn,{})})})}),document.getElementById("root")),j()}},[[103,1,2]]]);
//# sourceMappingURL=main.940bd527.chunk.js.map