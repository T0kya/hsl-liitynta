(this["webpackJsonphsl-liitynta"]=this["webpackJsonphsl-liitynta"]||[]).push([[0],{85:function(n,e,t){"use strict";t.r(e);var c=t(0),i=t.n(c),r=t(31),a=t.n(r),o=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,98)).then((function(e){var t=e.getCLS,c=e.getFID,i=e.getFCP,r=e.getLCP,a=e.getTTFB;t(n),c(n),i(n),r(n),a(n)}))},s=t(7),l=t(4),j=t(19),d=t(54),b=t.n(d),h=t(22),u=t(2),p=t(3),f=t(18),O=t.n(f),x=t(1);function m(){var n=Object(c.useState)(),e=Object(p.a)(n,2),t=e[0],i=e[1],r=Object(u.f)().id;return Object(c.useEffect)((function(){O.a.get("https://p.hsl.fi/api/v1/facilities/".concat(r,".json")).then((function(n){i(n.data)})).catch((function(n){console.log(n)})).then((function(){}))}),[]),console.log(t),Object(x.jsxs)("div",{children:[Object(x.jsx)(h.b,{to:"/",children:"Takaisin"}),Object(x.jsx)("h2",{children:t&&t.name.fi})]})}var g,v=t(12),k=t(96),y=v.a.header(g||(g=Object(s.a)(["\n    padding: ","px;\n    background-color: ",";\n    color: ",";\n"])),(function(n){return n.theme.spacing.large}),(function(n){return n.theme.color.primary}),(function(n){return n.theme.color.white}));function w(n){var e=n.children;return Object(x.jsx)(y,{children:e})}var S=t(33),C=t(5),z=t(93),A=t(97),N=t(94),T=t(95),D=t(10),H=t(23);var E=Object(H.a)("div",{target:"emb2msa2"})({name:"bjn8wh",styles:"position:relative"}),F=Object(H.a)("input",{target:"emb2msa1"})({name:"109bpo7",styles:"border:0;clip:rect(0 0 0 0);clippath:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px"}),I=Object(H.a)("div",{target:"emb2msa0"})("display:flex;cursor:pointer;align-items:center;justify-content:center;width:40px;height:40px;background-color:",(function(n){return n.checked?n.theme.color.primary:n.theme.color.white}),";border-radius:50%;border:2px solid ",(function(n){return n.theme.color.primary}),";transition:all 150ms;color:",(function(n){return n.checked?n.theme.color.white:n.theme.color.primary}),";font-size:0.8rem;text-align:center;");function M(n){var e=n.checked,t=n.children,c=Object(D.a)(n,["checked","children"]);return Object(x.jsxs)(E,{children:[Object(x.jsx)(F,Object(C.a)({type:"checkbox",defaultChecked:e},c)),Object(x.jsx)(I,{checked:e,children:t})]})}var P,R,U,B,L,Y=t(91),J=t(92),G=t(6),K=t.n(G),_=t(42),q=t.n(_),Q=t(89),V=t(90),W=v.a.div(P||(P=Object(s.a)(["\n  position: relative;\n  \n  border-radius: 50% 50% 50% 0;\n  border: 4px solid ",";\n  width: 20px;\n  height: 20px;\n  transform: rotate(-45deg);\n  background-color: white;\n\n  &::after {\n    position: absolute;\n  content: '';\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  top: 50%;\n  left: 50%;\n  margin-left: -5px;\n  margin-top: -5px;\n  background-color: ",";\n  }\n"])),(function(n){return n.color}),(function(n){return n.color}));function X(n){var e=n.marker,t=n.details,i=Object(l.h)(),r=Object(c.useState)([]),a=Object(p.a)(r,2),o=a[0],s=a[1],j=Object(c.useState)(),d=Object(p.a)(j,2),b=d[0],u=d[1];var f=K.a.divIcon({className:"custom-icon",html:q.a.renderToString(Object(x.jsx)(W,{color:i.color.primary}))}),m=K.a.divIcon({className:"custom-icon",html:q.a.renderToString(Object(x.jsx)(W,{color:i.color.grey}))}),g=b;return Object(x.jsx)(Y.a,{position:[e.location.bbox[1],e.location.bbox[0]],icon:(null===t||void 0===t?void 0:t.openingHours.openNow)?f:m,eventHandlers:{click:function(){var n;s([]),n=e.id,O.a.get("https://p.hsl.fi/api/v1/facilities/".concat(n,"/utilization.json")).then((function(n){s(n.data)})).catch((function(n){console.log(n)})).then((function(){})),u(void 0),t&&function(n){Object(Q.a)(new Date)?u(n.SATURDAY):Object(V.a)(new Date)&&u(n.SUNDAY),u(n.BUSINESS_DAY)}(t.openingHours.byDayType)}},children:Object(x.jsxs)(J.a,{closeOnClick:!1,children:[Object(x.jsx)("h4",{children:e.name.fi}),g&&Object(x.jsxs)("span",{children:["Avoinna t\xe4n\xe4\xe4n: ",null===g||void 0===g?void 0:g.from," - ",null===g||void 0===g?void 0:g.until]}),Object(x.jsx)("br",{}),"Paikkoja yhteens\xe4: ",null===t||void 0===t?void 0:t.builtCapacity.CAR,0!==o.length&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("br",{}),Object(x.jsxs)("span",{children:["Paikkoja vapaana: ",o[0].spacesAvailable]})," "]}),Object(x.jsx)("p",{children:Object(x.jsx)(h.b,{to:"/asema/".concat(e.id),children:"Katso lis\xe4tiedot"})})]})})}var Z,$,nn=v.a.div(R||(R=Object(s.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n"]))),en=Object(v.a)(z.a)(U||(U=Object(s.a)(["\n    width: 100%;\n    height: 100%;\n    .leaflet-div-icon {\n        background-color: transparent;\n        background: transparent;\n        border: 0;\n    }\n\n"]))),tn=v.a.div(B||(B=Object(s.a)(["\n  display: block;\n  position: absolute;\n  top: 0;\n  right: 0;\n  background-color: rgba(255,255,255,0.7);\n  padding: ","px;\n  z-index: 999;\n"])),(function(n){return n.theme.spacing.large})),cn=v.a.div(L||(L=Object(s.a)(["\n  display:flex;\n  width: 100%;\n  flex-direction: column;\n  align-items: center;\n\n  & > * {\n    margin-top: ","px;\n  }\n"])),(function(n){return n.theme.spacing.medium}));function rn(n){var e=n.markers,t=Object(c.useState)(null),i=Object(p.a)(t,2),r=i[0],a=i[1],o=Object(c.useState)(!1),s=Object(p.a)(o,2),l=s[0],j=s[1],d=Object(c.useState)({"12H":!1,247:!1,CUSTOM:!1}),b=Object(p.a)(d,2),h=b[0],u=b[1],f=Object(c.useState)([]),m=Object(p.a)(f,2),g=m[0],v=m[1],k=Object(c.useState)(e),y=Object(p.a)(k,2),w=y[0],z=y[1],D=function(n){!function(n){var e=Object.keys(n).filter((function(e){return n[e]}));v(e),u(n)}(Object(C.a)(Object(C.a)({},h),{},Object(S.a)({},n.target.name,!h[n.target.name])))},H=Object(c.useCallback)((function(){return e?0===g.length?e:e.filter((function(n){return g.some((function(e){return n.pricingMethod.includes(e)}))})):null}),[g,r]);Object(c.useEffect)((function(){var n=e.map((function(n){return O.a.get("https://p.hsl.fi/api/v1/facilities/".concat(n.id,".json")).then((function(n){return n.data}))}));n&&Promise.all(n).then((function(n){a(n)}))}),[]),Object(c.useEffect)((function(){var n=H();z(n)}),[g]);return Object(x.jsxs)(nn,{children:[Object(x.jsxs)(tn,{children:[Object(x.jsx)("h3",{children:"Maksuton:"}),Object(x.jsxs)(cn,{children:[Object(x.jsx)("label",{children:Object(x.jsx)(M,{name:"12H",checked:h["12H"],onChange:D,children:"12h"})}),Object(x.jsx)("label",{children:Object(x.jsx)(M,{name:"247",checked:h[247],onChange:D,children:"24h"})})]}),Object(x.jsx)(cn,{children:Object(x.jsx)("label",{children:Object(x.jsx)(M,{name:"open",checked:l,onChange:function(){j(!l)},children:Object(x.jsx)("span",{children:"Auki nyt"})})})})]}),Object(x.jsxs)(en,{center:[60.402778,25.029167],zoom:11,children:[Object(x.jsx)(A.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(x.jsx)(N.a,{pathOptions:{color:"purple"},children:w&&w.map((function(n){var e=null===r||void 0===r?void 0:r.find((function(e){return e.id===n.id}));return Object(x.jsxs)("div",{children:[l?e&&e.openingHours.openNow&&Object(x.jsx)(X,{details:e,marker:n}):e&&Object(x.jsx)(X,{details:e,marker:n}),Object(x.jsx)(T.a,{bounds:[[n.location.bbox[1],n.location.bbox[0]],[n.location.bbox[3],n.location.bbox[2]]]},n.id)]},n.id)}))})]})]})}var an=v.a.div(Z||(Z=Object(s.a)(["\n  width: 100%;\n  height: 90vh;\n"])));Object(v.a)(k.a.div)($||($=Object(s.a)(["\n    width: 80%;\n    margin: ","px auto;\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: ","px;\n    overflow: hidden;\n\n    div {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        img {\n            max-width: 100%;\n        }\n    }\n\n   \n"])),(function(n){return n.theme.spacing.large}),(function(n){return n.theme.spacing.large}));function on(){var n=Object(c.useState)(null),e=Object(p.a)(n,2),t=e[0],i=e[1];return Object(c.useEffect)((function(){O.a.get("https://p.hsl.fi/api/v1/facilities.json").then((function(n){i(n.data.results.filter((function(n){return"CAR"===n.type})))})).catch((function(n){console.log(n)})).then((function(){}))}),[]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(w,{children:Object(x.jsx)("h2",{children:"Liitynt\xe4pys\xe4k\xf6intiparkkipaikat"})}),t&&Object(x.jsx)(an,{children:Object(x.jsx)(rn,{markers:t})})]})}function sn(){return Object(x.jsx)(h.a,{children:Object(x.jsxs)(u.c,{children:[Object(x.jsx)(u.a,{path:"/asema/:id",children:Object(x.jsx)(m,{})}),Object(x.jsx)(u.a,{path:"/",children:Object(x.jsx)(on,{})})]})})}var ln,jn={color:{primary:"#1b8185",grey:"#9e9e9e",white:"#ffffff"},spacing:{small:4,medium:8,large:16}};function dn(){return Object(x.jsxs)(l.d,{theme:jn,children:[Object(x.jsx)(j.Global,{styles:Object(j.css)(ln||(ln=Object(s.a)(["\n         ","\n\n        body {\n          font-family: 'Nunito', sans-serif;\n          font-size: 16px;\n          h1,h2,h3, h4 {  \n            font-family: 'Raleway', sans-serif;\n          }\n          h1 {\n            font-size: 2rem;\n          }\n          h2 {\n            font-size: 1.6rem;\n          }\n          h3 {\n            font-size: 1.4rem;\n          }\n          h4 {\n            font-size: 1.2rem;\n          }\n          p {\n            font-family: 'Nunito', sans-serif;\n          }\n        }\n      "])),b.a)}),Object(x.jsx)(sn,{})]})}a.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(dn,{})}),document.getElementById("root")),o()}},[[85,1,2]]]);
//# sourceMappingURL=main.b7348a8d.chunk.js.map